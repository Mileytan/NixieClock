TARGET_PWM2=0
CURRENT_PWM2=0
PWM_DIRECTION_UP=0

BOOT_COMPLETED_STAGE=4
DHCP_COMPLETED_STAGE=3
WPA_COMPLETED_STAGE=2
WLAN_COMPLETED_STAGE=1

TRUE_STATE=1



if [ $1 -eq $BOOT_COMPLETED_STAGE ]
then
    CURRENT_PWM2=0
    TARGET_PWM2=1000000
    PWM_DIRECTION_UP=1
elif [ $1 -eq $DHCP_COMPLETED_STAGE ]
then
    CURRENT_PWM2=250000
    TARGET_PWM2=0
elif [ $1 -eq $WPA_COMPLETED_STAGE ]
then
    CURRENT_PWM2=750000
    TARGET_PWM2=250000
elif [ $1 -eq $WLAN_COMPLETED_STAGE ]
then
    CURRENT_PWM2=1000000
    TARGET_PWM2=750000   
fi


while [ $CURRENT_PWM2 != $TARGET_PWM2 ]
do

   if [ $PWM_DIRECTION_UP -eq $TRUE_STATE ]
   then
        CURRENT_PWM2=$(($CURRENT_PWM2+25000))
    else 
        CURRENT_PWM2=$(($CURRENT_PWM2-25000))
    fi
    echo $CURRENT_PWM2 > /sys/class/pwm/pwmchip2/pwm0/duty_cycle
    sleep 0.05

done